function isSimple(a){var b=0;return a.length<6&&b++,b}function initInput(){$("#account").val(""),$("#password").val(""),$("#name").val(""),$("#password").val("")}function formIsOk(a){for(var b=0;b<a.length;b++)if(a[b]===!1)return!1;return!0}function blurAllInput(){$("#account").blur(),$("#password").blur(),$("#name").blur(),$("#password").blur()}$(function(){var a=[];a[0]=!1,initInput(),$("#account").blur(function(b){var c=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/,d=this.value;c.test(d)?($("#account-info").css({display:"none"}),a[0]=!0,$.post("../queryAccount/",{account:$("#account").val()},function(b,c,d){"error"===b?($("#account-info").css({display:"block"}),$("#account-info").text("服务器错误"),a[0]=!1):"success"===b?($("#account-info").css({display:"block"}),$("#account-info").text("该邮箱已注册"),a[0]=!1):"fail"===b&&($("#account-info").css({display:"none"}),a[0]=!0)})):($("#account-info").css({display:"block"}),$("#account-info").text("邮箱格式错误"),a[0]=!1)}),$("#password").blur(function(b){var c=this.value;0===isSimple(c)?($("#password-info").css({display:"none"}),a[1]=!0):(a[1]=!1,$("#password-info").css({display:"block"}),$("#password-info").text("密码过于简单"))}),$("#name").blur(function(b){var c=this.value;""===c||c.length<2?($("#name-info").css({display:"block"}),$("#name-info").text("姓名不对"),a[2]=!1):($("#name-info").css({display:"none"}),a[2]=!0)}),$("#phone").blur(function(b){var c=/^1[3|4|5|8][0-9]\d{4,8}$/,d=this.value;c.test(d)?($("#phone-info").css({display:"none"}),a[3]=!0):($("#phone-info").css({display:"block"}),$("#phone-info").text("电话格式错误"),a[3]=!1)}),$("#register-form").submit(function(b){return blurAllInput(),formIsOk(a)?$.post("register",{account:$("#account").val(),password:$("#password").val(),name:$("#name").val(),sex:$("input:radio:checked").val(),phone:$("#phone").val()},function(a,b,c){layer.alert(a,function(){window.location.href="../login"})}):layer.msg("注册信息有错误，请完善后再注册"),!1})});