function initInput(){$("#name").val(""),$("#author").val(""),$("#sort").val(""),$("#num").val(""),$("#press").val(""),$("#libId").val(""),$("#isbn").val("")}$(function(){var a=!1;$("#book-form").submit(function(){if(1==a)return!1;if($(".wrong-info:visible").length>0)return layer.msg("请输入满足要求的内容"),a=!1,!1;var b={name:$("#name").val(),author:$("#author").val(),sort:$("#sort").val(),num:$("#num").val(),press:$("#press").val(),libId:$("#libId").val(),isbn:$("#isbn").val()};return $.post("/admin/addbook",b,function(b,c,d){var e=["请重新登录","添加失败","添加成功"];layer.msg(e[b.type]),2===b.type?layer.msg("添加成功"):1==b.type?layer.msg("添加失败"):(layer.msg("添加失败"),window.location.reload()),a=!1}),!1}),$("#book-form input").blur(function(a){var b=$(this).val();""==b?($(this).parent().next().text("*不能为空"),$(this).parent().next().css("display","block")):$(this).parent().next().css("display","none")}),$("#num").blur(function(){var a=$(this).val();isNaN(a)?($(this).parent().next().text("*只能是数字"),$(this).parent().next().css("display","block")):$(this).parent().next().css("display","none")}),$("#libId").blur(function(a){var b=$(this).val();""!=b&&$.post("/fn/verifybook",{type:"lib_id",value:b},function(a,b,c){"error"==a?($("#libId").parent().next().text("服务器错误"),$("#libId").parent().next().css("display","block")):"has"==a?($("#libId").parent().next().text("书籍编号已经存在不能重复"),$("#libId").parent().next().css("display","block")):"nothave"==a&&$("#libId").parent().next().css("display","none")})}),$("#isbn").blur(function(a){var b=$(this).val();""!=b&&$.post("/fn/verifybook",{type:"isbn",value:b},function(a,b,c){console.log(a),"error"==a?($("#isbn").parent().next().text("服务器错误"),$("#isbn").parent().next().css("display","block")):"has"==a?($("#isbn").parent().next().text("标准书号已经存在不能重复"),$("#isbn").parent().next().css("display","block")):"nothave"==a&&$("#isbn").parent().next().css("display","none")})})});